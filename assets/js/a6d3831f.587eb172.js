"use strict";(self.webpackChunkdocusaurus_wiki=self.webpackChunkdocusaurus_wiki||[]).push([[9095],{3905:function(e,n,a){a.d(n,{Zo:function(){return s},kt:function(){return g}});var t=a(67294);function r(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function i(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function u(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?i(Object(a),!0).forEach((function(n){r(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function l(e,n){if(null==e)return{};var a,t,r=function(e,n){if(null==e)return{};var a,t,r={},i=Object.keys(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||(r[a]=e[a]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var o=t.createContext({}),k=function(e){var n=t.useContext(o),a=n;return e&&(a="function"==typeof e?e(n):u(u({},n),e)),a},s=function(e){var n=k(e.components);return t.createElement(o.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},d=t.forwardRef((function(e,n){var a=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),d=k(a),g=r,c=d["".concat(o,".").concat(g)]||d[g]||p[g]||i;return a?t.createElement(c,u(u({ref:n},s),{},{components:a})):t.createElement(c,u({ref:n},s))}));function g(e,n){var a=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=a.length,u=new Array(i);u[0]=d;var l={};for(var o in n)hasOwnProperty.call(n,o)&&(l[o]=n[o]);l.originalType=e,l.mdxType="string"==typeof e?e:r,u[1]=l;for(var k=2;k<i;k++)u[k]=a[k];return t.createElement.apply(null,u)}return t.createElement.apply(null,a)}d.displayName="MDXCreateElement"},56033:function(e,n,a){a.r(n),a.d(n,{assets:function(){return s},contentTitle:function(){return o},default:function(){return g},frontMatter:function(){return l},metadata:function(){return k},toc:function(){return p}});var t=a(83117),r=a(80102),i=(a(67294),a(3905)),u=["components"],l={},o="Pekerja V2",k={unversionedId:"TimPengembang/Infrastruktur/PabrikPaket/PekerjaV2",id:"TimPengembang/Infrastruktur/PabrikPaket/PekerjaV2",title:"Pekerja V2",description:"Kategori: Infrastruktur/PabrikPaket/PekerjaV2",source:"@site/wiki/TimPengembang/Infrastruktur/PabrikPaket/PekerjaV2.md",sourceDirName:"TimPengembang/Infrastruktur/PabrikPaket",slug:"/TimPengembang/Infrastruktur/PabrikPaket/PekerjaV2",permalink:"/TimPengembang/Infrastruktur/PabrikPaket/PekerjaV2",draft:!1,editUrl:"https://github.com/BlankOn/wiki/edit/master/wiki/TimPengembang/Infrastruktur/PabrikPaket/PekerjaV2.md",tags:[],version:"current",frontMatter:{}},s={},p=[{value:"irgsh-node",id:"irgsh-node",level:2},{value:"Kebutuhan Administrasi",id:"kebutuhan-administrasi",level:3},{value:"Kebutuhan Aplikasi",id:"kebutuhan-aplikasi",level:3},{value:"Instalasi",id:"instalasi",level:3},{value:"Mendapatkan kode sumber",id:"mendapatkan-kode-sumber",level:4},{value:"Menyiapkan irgsh-node",id:"menyiapkan-irgsh-node",level:4},{value:"Konfigurasi",id:"konfigurasi",level:3},{value:"irgsh-node",id:"irgsh-node-1",level:4},{value:"SSH",id:"ssh",level:4},{value:"sudo",id:"sudo",level:4},{value:"Eksekusi",id:"eksekusi",level:3},{value:"Pabrik",id:"pabrik",level:4},{value:"Pengunggah",id:"pengunggah",level:4}],d={toc:p};function g(e){var n=e.components,a=(0,r.Z)(e,u);return(0,i.kt)("wrapper",(0,t.Z)({},d,a,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"pekerja-v2"},"Pekerja V2"),(0,i.kt)("p",null,"Kategori: Infrastruktur/PabrikPaket/PekerjaV2"),(0,i.kt)("h2",{id:"irgsh-node"},"irgsh-node"),(0,i.kt)("p",null,"irgsh-node adalah pabrik pekerja dalam infrastruktur \u200bpabrik_paket BlankOn."),(0,i.kt)("h3",{id:"kebutuhan-administrasi"},"Kebutuhan Administrasi"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Sertifikat SSL untuk pabrik paket, ditandatangani oleh CA Irgsh BlankOn."),(0,i.kt)("li",{parentName:"ol"},"Kunci SSH."),(0,i.kt)("li",{parentName:"ol"},"Akun di \u200bIrgsh yg dapat diperoleh dengan melampirkan:",(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"Judul sertifikat SSL"),(0,i.kt)("li",{parentName:"ol"},"Kunci publik SSH"),(0,i.kt)("li",{parentName:"ol"},"Nama pabrik"),(0,i.kt)("li",{parentName:"ol"},"Arsitektur pabrik")))),(0,i.kt)("h3",{id:"kebutuhan-aplikasi"},"Kebutuhan Aplikasi"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$ sudo apt-get install python dput pbuilder git-core")),(0,i.kt)("h3",{id:"instalasi"},"Instalasi"),(0,i.kt)("h4",{id:"mendapatkan-kode-sumber"},"Mendapatkan kode sumber"),(0,i.kt)("p",null,"Kode sumber akan diambil langsung dari repositori di GitHub?."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"$ git clone git://github.com/BlankOn/python-irgsh.git\n$ git clone git://github.com/BlankOn/irgsh-node.git\n$ cd irgsh-node\n$ ln -s ../python-irgsh/irgsh\n")),(0,i.kt)("h4",{id:"menyiapkan-irgsh-node"},"Menyiapkan irgsh-node"),(0,i.kt)("p",null,"Instalasi irgsh-node akan disiapkan oleh skrip \u200bBuildout yang disertakan.\nPustaka Python lain yang dibutuhkan akan otomatis diunduh oleh Buildout."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"$ cd irgsh-node\n$ python bootstrap.py\n$ ./bin/buildout\n")),(0,i.kt)("h3",{id:"konfigurasi"},"Konfigurasi"),(0,i.kt)("h4",{id:"irgsh-node-1"},"irgsh-node"),(0,i.kt)("p",null,"Sunting berkas irgsh-node.conf dan atur nilai-nilai berikut."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"irgsh",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"node-name berisi nama pabrik, sesuai yang didaftarkan ke \u200bIrgsh."),(0,i.kt)("li",{parentName:"ul"},"arch berisi arsitektur pabrik, misalnya i386 atau amd64."),(0,i.kt)("li",{parentName:"ul"},"ssl-cert berisi path menuju berkas sertifikat SSL."),(0,i.kt)("li",{parentName:"ul"},"ssl-key berisi path menuju berkas kunci privat SSL.")))),(0,i.kt)("h4",{id:"ssh"},"SSH"),(0,i.kt)("p",null,"Sunting berkas ~/.ssh/config dan tambahkan isian berikut."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"Host rani.blankonlinux.or.id\n    HostName rani.blankonlinux.or.id\n    Port 2222\n    IdentityFile /path/menuju/kunci/privat/ssh.key\n")),(0,i.kt)("h4",{id:"sudo"},"sudo"),(0,i.kt)("p",null,"Pastikan pengguna yang menjalankan irgsh-node dapat memanggil ",(0,i.kt)("inlineCode",{parentName:"p"},"/usr/sbin/pbuilder")," dengan sudo tanpa dimintai kata kunci. Contoh isi ",(0,i.kt)("inlineCode",{parentName:"p"},"/etc/sudoers")," (sunting dengan visudo)."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"pabrik ALL=NOPASSWD: /usr/sbin/pbuilder\n")),(0,i.kt)("h3",{id:"eksekusi"},"Eksekusi"),(0,i.kt)("p",null,"Ada dua buah aplikasi yang perlu dijalankan: pabrik irgsh-node dan pengunggah irgsh-uploader."),(0,i.kt)("h4",{id:"pabrik"},"Pabrik"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"$ cd irgsh-node\n$ ./bin/irgsh-node\n")),(0,i.kt)("h4",{id:"pengunggah"},"Pengunggah"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-$",metastring:"cd irgsh-node",cd:!0,"irgsh-node":!0},"$ ./bin/irgsh-uploader\n")))}g.isMDXComponent=!0}}]);