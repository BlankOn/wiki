<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.69">
<link rel="search" type="application/opensearchdescription+xml" title="BlankOn Linux" href="/opensearch.xml"><title data-react-helmet="true">PanduanIrgshCLIUntukPemaket | BlankOn Linux</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="PanduanIrgshCLIUntukPemaket | BlankOn Linux"><meta data-react-helmet="true" name="description" content="Panduan irgsh-cli untuk Pemaket"><meta data-react-helmet="true" property="og:description" content="Panduan irgsh-cli untuk Pemaket"><meta data-react-helmet="true" property="og:url" content="https://dev.blankonlinux.or.id/TimPengembang/Pemaket/PanduanIrgshCLIUntukPemaket"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://dev.blankonlinux.or.id/TimPengembang/Pemaket/PanduanIrgshCLIUntukPemaket"><link rel="stylesheet" href="/styles.c06d0ab6.css">
<link rel="preload" href="/styles.73659796.js" as="script">
<link rel="preload" href="/runtime~main.5bebafef.js" as="script">
<link rel="preload" href="/main.25400b6f.js" as="script">
<link rel="preload" href="/1.b1a075eb.js" as="script">
<link rel="preload" href="/1be78505.30b130dc.js" as="script">
<link rel="preload" href="/982.859ba755.js" as="script">
<link rel="preload" href="/985.764fb545.js" as="script">
<link rel="preload" href="/935f2afb.9eabe571.js" as="script">
<link rel="preload" href="/981.41839bd5.js" as="script">
<link rel="preload" href="/17896441.356d9741.js" as="script">
<link rel="preload" href="/d9c27b8b.91c3d516.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_2AhQ">Skip to main content</button></nav><nav class="navbar navbar--fixed-top navbarHideable_3046 navbarHidden_1Uo_"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logo.jpeg" alt="BlankOn Linux Logo" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img src="/img/logo.jpeg" alt="BlankOn Linux Logo" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"><strong class="navbar__title">BlankOn</strong></a><a class="navbar__item navbar__link" href="/TimPengembang/TimBlankOn">Tim Pengembang</a><a class="navbar__item navbar__link" href="/ProdukBlankOn/README">Produk</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/BlankOn" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="BlankOn Wiki"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">âŒ˜</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.jpeg" alt="BlankOn Linux Logo" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img src="/img/logo.jpeg" alt="BlankOn Linux Logo" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"><strong class="navbar__title">BlankOn</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/TimPengembang/TimBlankOn">Tim Pengembang</a></li><li class="menu__list-item"><a class="menu__link" href="/ProdukBlankOn/README">Produk</a></li><li class="menu__list-item"><a href="https://github.com/BlankOn" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="BlankOn Wiki"></a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_39qw"><div class="container padding-vert--lg docItemWrapper_1Hme"><div class="row"><div class="col docItemCol_2AGf"><div class="docItemContainer_1tAC"><article><div class="markdown"><h1 id="panduan-irgsh-cli-untuk-pemaket">Panduan irgsh-cli untuk Pemaket</h1><h2 id="gpg">GPG</h2><h3 id="kebutuhan">Kebutuhan</h3><ul><li><code>apt install gnupg build-essential devscripts debhelper</code></li></ul><h3 id="generate">Generate</h3><pre><code>gnupg --full-generate-key
</code></pre><p>Dalam proses akan ditanyakan informasi entitas dan kunci, contoh:</p><pre><code>gpg (GnuPG) 2.2.20; Copyright (C) 2020 Free Software Foundation, Inc.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.arsip-dev.blankonlinux.or.id/

Please select what kind of key you want:
   (1) RSA and RSA (default)
   (2) DSA and Elgamal
   (3) DSA (sign only)
   (4) RSA (sign only)
  (14) Existing key from card
Your selection? 1
RSA keys may be between 1024 and 4096 bits long.
What keysize do you want? (3072) 4096
Requested keysize is 4096 bits
Please specify how long the key should be valid.
         0 = key does not expire
      &lt;n&gt;  = key expires in n days
      &lt;n&gt;w = key expires in n weeks
      &lt;n&gt;m = key expires in n months
      &lt;n&gt;y = key expires in n years
Key is valid for? (0) 5y
Key expires at Thu 20 Nov 2025 07:49:07 PM WIB
Is this correct? (y/N) y

GnuPG needs to construct a user ID to identify your key.

Real name: Herpiko Dwi Aguno
Email address: herpiko@gmail.com
Comment: 
You selected this USER-ID:
    &quot;Herpiko Dwi Aguno &lt;herpiko@gmail.com&gt;&quot;

Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? O
We need to generate a lot of random bytes. It is a good idea to perform
some other action (type on the keyboard, move the mouse, utilize the
disks) during the prime generation; this gives the random number
generator a better chance to gain enough entropy.
oienienoienoienoienoienoienoienoienoienoienoienoiengpg: key F73403755814255E marked as ultimately trusted
gpg: directory &#x27;/home/herpiko/.gnupg/openpgp-revocs.d&#x27; created
oienoiegpg: revocation certificate stored as &#x27;/home/herpiko/.gnupg/openpgp-revocs.d/4E1C6A31FB1DF66463806857F73403755814255E.rev&#x27;
public and secret key created and signed.

pub   rsa4096 2020-11-21 [SC] [expires: 2025-11-20]
      4E1C6A31FB1DF66463806857F73403755814255E
uid                      Herpiko Dwi Aguno &lt;herpiko@gmail.com&gt;
sub   rsa4096 2020-11-21 [E] [expires: 2025-11-20]
</code></pre><p>Lihat kunci yang sudah dibikin dengan,</p><pre><code>gnupg -K
</code></pre><h3 id="ekspor">Ekspor</h3><p>Salin terlebih dahulu identitas kuncinya. Lihat identitas kunci yang ada dengan perintah <code>gpg -K</code>. Outputnya:</p><pre><code>/home/herpiko/.gnupg/pubring.kbx
--------------------------------
sec   rsa4096 2020-11-21 [SC] [expires: 2025-11-20]
      4E1C6A31FB1DF66463806857F73403755814255E
uid           [ultimate] Herpiko Dwi Aguno &lt;herpiko@gmail.com&gt;
ssb   rsa4096 2020-11-21 [E] [expires: 2025-11-20]
</code></pre><p>Di kasus output di atas, identitas kuncinya adalah <code>4E1C6A31FB1DF66463806857F73403755814255E</code>.</p><p>Kemudian coba ekspor kunci publiknya dengan perintah,</p><pre><code>gpg --armor --export 4E1C6A31FB1DF66463806857F73403755814255E &gt; namapemaket-gpg-pubkey
</code></pre><p>Sampai di sini, kuncinya dapat diserahkan ke tim infra untuk disuntikkan ke GPG keystore irgsh.</p><h3 id="hapus">Hapus</h3><p>Menghapus kunci cukup dengan perintah,</p><pre><code>gpg --delete-key 4E1C6A31FB1DF66463806857F73403755814255E
</code></pre><h2 id="pendaftaran-kunci-pemaket-ke-irgsh">Pendaftaran kunci pemaket ke irgsh</h2><p>Bagian ini dilakukan oleh Tim Infra.</p><ul><li>Bawa kunci-kunci yang mau diimpor ke mesin irgsh, misal dengan <code>scp</code></li><li>Masuk ke user <code>irgsh</code></li><li>Impor dengan perintah <code>gpg --import &lt; /path/to/pub.key</code></li><li>setelah diimpor, pastikan kuncinya terdaftar dengan perintah <code>gpg --list-key</code></li></ul><h2 id="irgsh-cli">irgsh-cli</h2><h3 id="kebutuhan-1">Kebutuhan</h3><ul><li>Turunan Debian</li><li><code>apt install gnupg curl jq tar build-essential devscripts debhelper</code></li></ul><h3 id="pemasangan">Pemasangan</h3><p>Pasang <code>irgsh-cli</code> dengan perintah satu baris berikut,</p><pre><code>curl -L -o- https://raw.githubusercontent.com/BlankOn/irgsh-go/master/install-cli.sh | bash
</code></pre><p>Bila sudah selesai, akan tampil output seperti di bawah ini yang menandakan irgsh-cli siap dipakai,</p><pre><code>/tmp /tmp
Extracting ... 
Extracting [OK]

Installing files ... 
&#x27;/tmp/irgsh-go/usr/bin/irgsh-cli&#x27; -&gt; &#x27;/usr/bin/irgsh-cli&#x27;
Happy hacking!
</code></pre><h3 id="konfigurasi-awal">Konfigurasi awal</h3><p>Sebelum mengkonfigurasi <code>irgsh-cli</code>, pemaket perlu mengkonfirmasi ke Tim Infra di mana <code>irgsh-chief</code> (induk dari komponen-komponen irgsh) dinyalakan. Dalam lokakarya ini, induk irgsh hidup di <code>https://irgsh.blankonlinux.or.id</code>.</p><p>Kemudian konfigurasikan <code>irgsh-cli</code> dengan perintah berikut,</p><pre><code>irgsh-cli config --chief https://irgsh.blankonlinux.or.id --key 4E1C6A31FB1DF66463806857F73403755814255E
</code></pre><p>Sampai di sini, <code>irgsh-cli</code> akan bekerja dengan induk irgsh <a href="https://irgsh.blankonlinux.or.id">https://irgsh.blankonlinux.or.id</a> menggunakan kunci pemaket <code>4E1C6A31FB1DF66463806857F73403755814255E</code>.</p><h3 id="pemaketan-dengan-irgsh-cli">Pemaketan dengan irgsh-cli</h3><p>Pemaket membutuhkan setidaknya 2 hal untuk memaketkan paket ke irgsh, yaitu:</p><ul><li>Spesifikasi Debian (<a href="https://github.com/blankon-packages">https://github.com/blankon-packages</a>)</li><li>Kode sumber (fitur opsional menunggu tiket <a href="https://github.com/BlankOn/irgsh-go/issues/78">https://github.com/BlankOn/irgsh-go/issues/78</a>)</li></ul><p>Keduanya didefinisikan dengan URL lumbung kode (bisa dari mana pun yang penting dapat diakses oleh internet dan sifatnya publik).</p><p>Misal kita akan mencoba untuk memaketkan <code>bromo-theme</code> dengan bahan di bawah ini:</p><ul><li>Spesifikasi Debian: <a href="https://github.com/blankon-packages/bromo-theme">https://github.com/blankon-packages/bromo-theme</a></li><li>Kode sumber: <a href="https://github.com/blankon/bromo-theme">https://github.com/blankon/bromo-theme</a></li></ul><p>Setelah keduanya disiapkan, pemaket dapat menyuntikkan paket ke irgsh dengan perintah berikut,</p><pre><code>irgsh-cli submit --source https://github.com/blankon/bromo-theme --package https://github.com/blankon-packages/bromo-theme --experimental
</code></pre><p>Flag <code>--experimental</code> menandakan paket ini akan disuntikkan ke lumbung experimental alih-alih ke lumbung pengembangan resmi. Tujuannya untuk uji coba sebelum benar-benar dipaketkan ke lumbung.</p><p>Lumbung pengembangan resmi terletak di arsip-dev.blankonlinux.or.id. Untuk paket experimental akan disuntik ke arsip-dev.blankonlinux.or.id/experimental, sementara paket resmi masuk ke arsip-dev.blankonlinux.or.id/dev.</p><p>Untuk memantau proses pembangunan paket, gunakan perintah berikut:</p><pre><code>irgsh-cli log
</code></pre><p>Atau dengan membubuhkan id pipeline,</p><pre><code>irgsh-cli log 2020-11-21-205136_b8dbbd86-0ee1-409a-b3e3-4ec4d97c5302
</code></pre><p>Panduan lebih detail mengenai pemaketan dengan irgsh-cli dapat disiman di <a href="https://github.com/BlankOn/wiki/blob/master/TimPengembang/Pemaket/PanduanPemaketanMenggunakanIrgshCli.md">https://github.com/BlankOn/wiki/blob/master/TimPengembang/Pemaket/PanduanPemaketanMenggunakanIrgshCli.md</a></p><h2 id="sidik-gangguan">Sidik Gangguan</h2><h3 id="kunci-privat-tidak-dikenali">Kunci privat tidak dikenali</h3><p>Pesan galat menyerupai,</p><pre><code>gpg: skipped &quot;41B4FC0A57E7F7F8DD94E0AA2D21BB5FAA32AF3F&quot;: No secret key
gpg: /tmp/debsign.QNCSozgK/blankon-keyring_2016.09.04-4.2.dsc: clear-sign failed: No secret key
debsign: gpg error occurred!  Aborting....
debuild: fatal error at line 1112:
running debsign failed
</code></pre><p>Antara lain mungkin disebabkan oleh:</p><ul><li>Identitas kunci untuk menandatangani paket belum ditetapkan atau tidak cocok dengan yang ada di kantong kunci GPG Anda. Silakan ditetap dengan perintah, <code>rgsh-cli config --chief https://irgsh.blankonlinux.or.id --key YOURKEYIDENTITY</code></li><li>Nama dan alamat surat elektronik perawat paket yang ada di berkas <code>debian/changelog</code> tidak cocok dengan identitas kunci yang ada di kantong kunci GPG Anda. Silakan sesuaikan lagi berkas tersebut.</li></ul><h3 id="permission-denied-di-tty">Permission denied di tty</h3><p>Galatnya,</p><pre><code>gpg: agent_genkey failed: Permission denied
Key generation failed: Permission denied
</code></pre><p>Biasanya terjadi bila mencoba generate gpg namun dalam sesi SSH. Solusinya coba generate ulang namun dalam tmux atau cek kepemilikan sesi tty dengan,</p><pre><code>ls -l $(tty)
</code></pre><p>Lalu geser kepemilikannya dengan,</p><pre><code>chown namapengguna /dev/pts/0
</code></pre></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/BlankOn/wiki/commits/master/TimPengembang/Pemaket/PanduanIrgshCLIUntukPemaket.md" target="_blank" style="margin-right:15px" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 16 16" style="margin-right:0.3em;vertical-align:sub"><path fill-rule="evenodd" d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"></path></svg>Page history</a><a href="https://github.com/BlankOn/wiki/edit/master/TimPengembang/Pemaket/PanduanIrgshCLIUntukPemaket.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_ thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#gpg" class="table-of-contents__link">GPG</a><ul><li><a href="#kebutuhan" class="table-of-contents__link">Kebutuhan</a></li><li><a href="#generate" class="table-of-contents__link">Generate</a></li><li><a href="#ekspor" class="table-of-contents__link">Ekspor</a></li><li><a href="#hapus" class="table-of-contents__link">Hapus</a></li></ul></li><li><a href="#pendaftaran-kunci-pemaket-ke-irgsh" class="table-of-contents__link">Pendaftaran kunci pemaket ke irgsh</a></li><li><a href="#irgsh-cli" class="table-of-contents__link">irgsh-cli</a><ul><li><a href="#kebutuhan-1" class="table-of-contents__link">Kebutuhan</a></li><li><a href="#pemasangan" class="table-of-contents__link">Pemasangan</a></li><li><a href="#konfigurasi-awal" class="table-of-contents__link">Konfigurasi awal</a></li><li><a href="#pemaketan-dengan-irgsh-cli" class="table-of-contents__link">Pemaketan dengan irgsh-cli</a></li></ul></li><li><a href="#sidik-gangguan" class="table-of-contents__link">Sidik Gangguan</a><ul><li><a href="#kunci-privat-tidak-dikenali" class="table-of-contents__link">Kunci privat tidak dikenali</a></li><li><a href="#permission-denied-di-tty" class="table-of-contents__link">Permission denied di tty</a></li></ul></li></ul></div></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="text--center"><div class="margin-bottom--sm"><a href="https://blankonlinux.or.id" target="_blank" rel="noopener noreferrer" class="footerLogoLink_1zJy"><img class="footer__logo" alt="BlankOn Linux" src="/img/logo-hitam.png"></a></div><div>Copyright Â© 2020 BlankOn Linux. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.73659796.js"></script>
<script src="/runtime~main.5bebafef.js"></script>
<script src="/main.25400b6f.js"></script>
<script src="/1.b1a075eb.js"></script>
<script src="/1be78505.30b130dc.js"></script>
<script src="/982.859ba755.js"></script>
<script src="/985.764fb545.js"></script>
<script src="/935f2afb.9eabe571.js"></script>
<script src="/981.41839bd5.js"></script>
<script src="/17896441.356d9741.js"></script>
<script src="/d9c27b8b.91c3d516.js"></script>
</body>
</html>