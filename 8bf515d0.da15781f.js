(window.webpackJsonp=window.webpackJsonp||[]).push([[526],{1045:function(e,a,n){"use strict";n.d(a,"a",(function(){return m}));var t=n(0),i=n.n(t);function r(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function l(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function c(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?l(Object(n),!0).forEach((function(a){r(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function o(e,a){if(null==e)return{};var n,t,i=function(e,a){if(null==e)return{};var n,t,i={},r=Object.keys(e);for(t=0;t<r.length;t++)n=r[t],a.indexOf(n)>=0||(i[n]=e[n]);return i}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)n=r[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var p=i.a.createContext({}),u=function(e){var a=i.a.useContext(p),n=a;return e&&(n="function"==typeof e?e(a):c(c({},a),e)),n},b={inlineCode:"code",wrapper:function(e){var a=e.children;return i.a.createElement(i.a.Fragment,{},a)}},d=i.a.forwardRef((function(e,a){var n=e.components,t=e.mdxType,r=e.originalType,l=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),d=u(n),m=t,s=d["".concat(l,".").concat(m)]||d[m]||b[m]||r;return n?i.a.createElement(s,c(c({ref:a},p),{},{components:n})):i.a.createElement(s,c({ref:a},p))}));function m(e,a){var n=arguments,t=a&&a.mdxType;if("string"==typeof e||t){var r=n.length,l=new Array(r);l[0]=d;var c={};for(var o in a)hasOwnProperty.call(a,o)&&(c[o]=a[o]);c.originalType=e,c.mdxType="string"==typeof e?e:t,l[1]=c;for(var p=2;p<r;p++)l[p]=n[p];return i.a.createElement.apply(null,l)}return i.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},593:function(e,a,n){"use strict";n.r(a),n.d(a,"frontMatter",(function(){return l})),n.d(a,"metadata",(function(){return c})),n.d(a,"rightToc",(function(){return o})),n.d(a,"default",(function(){return u}));var t=n(3),i=n(7),r=(n(0),n(1045)),l={},c={unversionedId:"TimPengembang/Pemaket/PanduanPatchingPaketNonNative",id:"TimPengembang/Pemaket/PanduanPatchingPaketNonNative",isDocsHomePage:!1,title:"PanduanPatchingPaketNonNative",description:"Panduan patching paket non-native (quilt)",source:"@site/Wiki/TimPengembang/Pemaket/PanduanPatchingPaketNonNative.md",slug:"/TimPengembang/Pemaket/PanduanPatchingPaketNonNative",permalink:"/TimPengembang/Pemaket/PanduanPatchingPaketNonNative",editUrl:"https://github.com/BlankOn/wiki/edit/master/Wiki/TimPengembang/Pemaket/PanduanPatchingPaketNonNative.md",version:"current"},o=[{value:"Dengan dpkg-source",id:"dengan-dpkg-source",children:[{value:"Menyiapkan tarball orig",id:"menyiapkan-tarball-orig",children:[]},{value:"Membuat patch",id:"membuat-patch",children:[]}]},{value:"Dengan diff",id:"dengan-diff",children:[]},{value:"Dengan debian/rules",id:"dengan-debianrules",children:[]}],p={rightToc:o};function u(e){var a=e.components,n=Object(i.a)(e,["components"]);return Object(r.a)("wrapper",Object(t.a)({},p,n,{components:a,mdxType:"MDXLayout"}),Object(r.a)("h1",{id:"panduan-patching-paket-non-native-quilt"},"Panduan patching paket non-native (quilt)"),Object(r.a)("p",null,"Panduan ini dapat digunakan untuk menambal ",Object(r.a)("a",Object(t.a)({parentName:"p"},{href:"https://github.com/BlankOn/wiki/blob/master/TimPengembang/Pemaket/JenisPaket.md#2-paket-native-dengan-modifikasi"}),"paket native yang difork menjadi paket non-native")," atau ",Object(r.a)("a",Object(t.a)({parentName:"p"},{href:"https://github.com/BlankOn/wiki/blob/master/TimPengembang/Pemaket/JenisPaket.md#3-paket-non-native"}),"paket non-native")," "),Object(r.a)("p",null,"Dalam contoh ini, kita akan menggunakan studi kasus dari paket ",Object(r.a)("inlineCode",{parentName:"p"},"calamares-settings-blankon")),Object(r.a)("h2",{id:"dengan-dpkg-source"},"Dengan dpkg-source"),Object(r.a)("h3",{id:"menyiapkan-tarball-orig"},"Menyiapkan tarball orig"),Object(r.a)("ul",null,Object(r.a)("li",{parentName:"ul"},"Kloning berkas source ke ",Object(r.a)("inlineCode",{parentName:"li"},"source"),", ")),Object(r.a)("pre",null,Object(r.a)("code",Object(t.a)({parentName:"pre"},{}),"git clone git@github.com:BlankOn/calamares-settings-blankon.git source\n")),Object(r.a)("ul",null,Object(r.a)("li",{parentName:"ul"},"Buat tarbal orig dengan pola nama berkas, ",Object(r.a)("inlineCode",{parentName:"li"},"namapaket_nomorversi.orig.tar.gz"),". Di kasus ini nama paket adalah ",Object(r.a)("inlineCode",{parentName:"li"},"calamares-settings-blankon"),", versi paket adalah ",Object(r.a)("inlineCode",{parentName:"li"},"11.0.4"),", maka nama berkas adalah ",Object(r.a)("inlineCode",{parentName:"li"},"calamares-settings-blankon_11.0.4.orig.tar.gz"))),Object(r.a)("pre",null,Object(r.a)("code",Object(t.a)({parentName:"pre"},{}),"tar -zcvf calamares-settings-blankon_11.0.4.orig.tar.gz source\n")),Object(r.a)("h3",{id:"membuat-patch"},"Membuat patch"),Object(r.a)("ul",null,Object(r.a)("li",{parentName:"ul"},"Kloning berkas spesifikasi Debian untuk paket ini,")),Object(r.a)("pre",null,Object(r.a)("code",Object(t.a)({parentName:"pre"},{}),"  git clone git@github.com:blankon-packages/calamares-settings-blankon.git package\n")),Object(r.a)("ul",null,Object(r.a)("li",{parentName:"ul"},"Masuk ke ",Object(r.a)("inlineCode",{parentName:"li"},"package"),", lakukan perubahan/branding yang diperlukan"),Object(r.a)("li",{parentName:"ul"},"Buat patch dengan perintah ",Object(r.a)("inlineCode",{parentName:"li"},"dpkg-source --commit")),Object(r.a)("li",{parentName:"ul"},"Masukkan nama patch, misalnya ",Object(r.a)("inlineCode",{parentName:"li"},"BlankOn branding"))),Object(r.a)("pre",null,Object(r.a)("code",Object(t.a)({parentName:"pre"},{}),"Enter the desired patch name: BlankOn branding\n")),Object(r.a)("ul",null,Object(r.a)("li",{parentName:"ul"},"Anda akan dibawa ke aplikasi penyunting teks untuk menyunting deskripsi patch. Tuliskan deskripsi sesuai patch yang dilakukan. Untuk metadata, cukup sesuaikan nilai untuk ",Object(r.a)("inlineCode",{parentName:"li"},"Origin")," (alamat lumbung source) dan ",Object(r.a)("inlineCode",{parentName:"li"},"Bug")," (dapat diisi pranala tiket). Contoh,")),Object(r.a)("pre",null,Object(r.a)("code",Object(t.a)({parentName:"pre"},{}),"Origin: other, git@github.com:BlankOn/calamares-settings-blankon.git\nBug: https://github.com/BlankOn/Verbeek/issues/168\n")),Object(r.a)("ul",null,Object(r.a)("li",{parentName:"ul"},"Patch akan dibuat di ",Object(r.a)("inlineCode",{parentName:"li"},".pc")," dan ",Object(r.a)("inlineCode",{parentName:"li"},"debian/patches")),Object(r.a)("li",{parentName:"ul"},"Perbarui informasi ",Object(r.a)("inlineCode",{parentName:"li"},"Uploaders")," di debian/control dan revisi di debian/changelog bila diperlukan."),Object(r.a)("li",{parentName:"ul"},"Commit semua perubahan yang ada ke git.")),Object(r.a)("h2",{id:"dengan-diff"},"Dengan diff"),Object(r.a)("ul",null,Object(r.a)("li",{parentName:"ul"},Object(r.a)("inlineCode",{parentName:"li"},"apt-get source gdm3")),Object(r.a)("li",{parentName:"ul"},Object(r.a)("inlineCode",{parentName:"li"},"cp gdm3 gdm3.orig")),Object(r.a)("li",{parentName:"ul"},"Masuk ke ",Object(r.a)("inlineCode",{parentName:"li"},"gmd3")," dan lakukan perubahan"),Object(r.a)("li",{parentName:"ul"},"Keluar dari ",Object(r.a)("inlineCode",{parentName:"li"},"gdm3")),Object(r.a)("li",{parentName:"ul"},"Lakukan ",Object(r.a)("inlineCode",{parentName:"li"},"diff")," antara 2 direktori tersebut"),Object(r.a)("li",{parentName:"ul"},"Hasil ",Object(r.a)("inlineCode",{parentName:"li"},"diff")," dimasukkan ke ",Object(r.a)("inlineCode",{parentName:"li"},"debian/patches"))),Object(r.a)("h2",{id:"dengan-debianrules"},"Dengan debian/rules"),Object(r.a)("p",null,"Untuk berkas yang sifatnya binari (bukan teks) seperti berkas PNG atau ",Object(r.a)("em",{parentName:"p"},"executable binary"),", ",Object(r.a)("em",{parentName:"p"},"patching")," dilakukan lewat ",Object(r.a)("inlineCode",{parentName:"p"},"debian/rules")," dengan menambahkan baris yang akan menyalin berkas tersebut ke ",Object(r.a)("inlineCode",{parentName:"p"},"path")," yang diinginkan, contoh:"),Object(r.a)("pre",null,Object(r.a)("code",Object(t.a)({parentName:"pre"},{}),"cp debian/BlankonLogoBlank.png panels/info/BlankonLogoBlank.png\n")),Object(r.a)("p",null,"Contoh lengkap pada paket ",Object(r.a)("inlineCode",{parentName:"p"},"gnome-control-center")),Object(r.a)("pre",null,Object(r.a)("code",Object(t.a)({parentName:"pre"},{}),'$cat debian/rules\n#!/usr/bin/make -f\n\ninclude /usr/share/gnome-pkg-tools/1/rules/gnome-get-source.mk\n\nexport DEB_LDFLAGS_MAINT_APPEND = -Wl,-z,defs -Wl,-O1 -Wl,--as-needed\nexport DEB_CPPFLAGS_MAINT_APPEND = -DSSHD_SERVICE=\\"ssh.service\\"\n\n%:\n        dh $@ --with gnome\n\noverride_dh_autoreconf:\n        dh_autoreconf --as-needed\n\noverride_dh_auto_configure:\n        dh_auto_configure -- \\\n                --libexecdir=\\$${prefix}/lib/gnome-control-center \\\n                --with-gnome-session-libexecdir=\\$${prefix}/lib/gnome-session \\\n                --disable-update-mimedb\n\noverride_dh_auto_build:\n        cp debian/BlankonLogoBlank.png panels/info/BlankonLogoBlank.png\n        dh_auto_build\n\noverride_dh_missing:\n        dh_missing --fail-missing\n')))}u.isMDXComponent=!0}}]);